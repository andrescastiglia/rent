# =============================================================================
# CONFIGURACIÓN DE ENTORNO DE DESARROLLO LOCAL
# =============================================================================
# Este archivo contiene las variables de entorno para desarrollo local.
# INSTRUCCIONES:
#   1. Copiar este archivo como .env: cp .env.example .env
#   2. Ajustar valores según necesidad
#   3. NUNCA commitear el archivo .env (debe estar en .gitignore)
# =============================================================================

# -----------------------------------------------------------------------------
# PostgreSQL - Base de Datos Principal
# -----------------------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=rent_dev
POSTGRES_USER=rent_user
POSTGRES_PASSWORD=rent_dev_password

# Connection string completo (para frameworks que lo requieran)
DATABASE_URL=postgresql://rent_user:rent_dev_password@localhost:5432/rent_dev

# -----------------------------------------------------------------------------
# Redis - Caché y Sesiones
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=rent_redis_password

# Connection string
REDIS_URL=redis://:rent_redis_password@localhost:6379

# -----------------------------------------------------------------------------
# RabbitMQ - Message Broker
# -----------------------------------------------------------------------------
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_USER=rent_user
RABBITMQ_PASSWORD=rent_rabbitmq_password
RABBITMQ_VHOST=rent_vhost

# Connection string
RABBITMQ_URL=amqp://rent_user:rent_rabbitmq_password@localhost:5672/rent_vhost

# -----------------------------------------------------------------------------
# pgAdmin - Herramienta de Administración (Opcional)
# -----------------------------------------------------------------------------
PGADMIN_PORT=5050
PGADMIN_EMAIL=admin@rent.local
PGADMIN_PASSWORD=admin

# -----------------------------------------------------------------------------
# Aplicación - Configuración General
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:$PORT

# JWT y Seguridad
JWT_SECRET=dev_jwt_secret_change_in_production
JWT_REFRESH_SECRET=dev_refresh_secret_change_in_production
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d
TURNSTILE_SECRET_KEY=your_turnstile_secret_key_here
NEXT_PUBLIC_TURNSTILE_SITE_KEY=your_turnstile_site_key_here

# Encriptación
ENCRYPTION_KEY=dev_encryption_key_32_characters

# -----------------------------------------------------------------------------
# Integraciones Externas (para desarrollo usar credenciales de sandbox/test)
# -----------------------------------------------------------------------------

# Stripe (Test Mode)
STRIPE_PUBLIC_KEY=pk_test_your_key_here
STRIPE_SECRET_KEY=sk_test_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# MercadoPago (Test Mode)
MERCADOPAGO_PUBLIC_KEY=TEST-your_public_key_here
MERCADOPAGO_ACCESS_TOKEN=TEST-your_access_token_here

# WhatsApp Cloud API (Meta Graph v22.0)
WHATSAPP_ENABLED=true
WHATSAPP_API_BASE_URL=https://graph.facebook.com/v22.0
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id_here
WHATSAPP_ACCESS_TOKEN=your_whatsapp_access_token_here
WHATSAPP_VERIFY_TOKEN=your_custom_verify_token_here

# Shared secret for batch -> backend internal WhatsApp endpoint
BATCH_WHATSAPP_INTERNAL_TOKEN=replace_with_shared_secret
WHATSAPP_DOCUMENTS_BASE_URL=$FRONTEND_URL
WHATSAPP_DOCUMENT_LINK_SECRET=replace_with_document_link_secret
WHATSAPP_DOCUMENT_LINK_TTL_SECONDS=604800

# OpenAI (LLM provider)
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
# Opcional: custom endpoint/proxy compatible con OpenAI API
# OPENAI_BASE_URL=

# GitHub Issues (integración para reportes técnicos desde chat)
# Requerido para habilitar búsqueda/listado/creación de issues desde AI tools.
GITHUB_TOKEN=ghp_your_github_token_here
GITHUB_REPOSITORY=owner/repo
# Opcional (Enterprise / proxy)
# GITHUB_API_BASE_URL=https://api.github.com
# Labels por defecto separados por coma para nuevos issues.
GITHUB_ISSUES_DEFAULT_LABELS=chat-report
# TTL de previews (segundos) antes de confirmar commit.
GITHUB_ISSUES_PREVIEW_TTL_SECONDS=900

# DocuSign (Sandbox)
DOCUSIGN_INTEGRATION_KEY=your_integration_key_here
DOCUSIGN_USER_ID=your_user_id_here
DOCUSIGN_ACCOUNT_ID=your_account_id_here
DOCUSIGN_BASE_PATH=https://demo.docusign.net/restapi

# AWS S3 (LocalStack para desarrollo local o credenciales de dev)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=dev_access_key
AWS_SECRET_ACCESS_KEY=dev_secret_key
AWS_S3_BUCKET=rent-dev-documents

# -----------------------------------------------------------------------------
# Feature Flags (para desarrollo)
# -----------------------------------------------------------------------------
ENABLE_SWAGGER_DOCS=true
ENABLE_DEBUG_LOGGING=true
ENABLE_CORS=true
ENABLE_RATE_LIMITING=false

# AI Tools (LLM Orchestration)
# NONE: deshabilitado
# READONLY: solo tools de lectura (GET)
# FULL: lectura + mutaciones (POST/PUT/PATCH/DELETE)
AI_TOOLS_MODE=NONE

# -----------------------------------------------------------------------------
# Observabilidad (opcional para desarrollo local)
# -----------------------------------------------------------------------------
# SENTRY_DSN=your_sentry_dsn_here
# Backend expone /metrics y recibe eventos de frontend en /frontend-metrics
# Batch usa Pushgateway para jobs efímeros:
PROMETHEUS_PUSHGATEWAY_URL=
PROMETHEUS_PUSHGATEWAY_JOB=rent_batch
# PROMETHEUS_PUSHGATEWAY_INSTANCE=rent-batch-dev

# Traces OpenTelemetry (sin infra incluida en este repo)
# Backend y Batch (Node SDK):
OTEL_EXPORTER_OTLP_ENDPOINT=
# o endpoint específico de traces:
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://localhost:4318/v1/traces
# headers opcionales formato key=value,key2=value2
OTEL_EXPORTER_OTLP_HEADERS=
OTEL_SERVICE_NAME=rent-backend
OTEL_SERVICE_NAME_BACKEND=rent-backend
OTEL_SERVICE_NAME_BATCH=rent-batch
OTEL_ENVIRONMENT=development
OTEL_SDK_DISABLED=false

# Frontend (browser SDK):
NEXT_PUBLIC_OTEL_EXPORTER_OTLP_ENDPOINT=
# o endpoint específico:
# NEXT_PUBLIC_OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://localhost:4318/v1/traces
NEXT_PUBLIC_OTEL_EXPORTER_OTLP_HEADERS=
NEXT_PUBLIC_OTEL_SERVICE_NAME=rent-frontend-web
NEXT_PUBLIC_OTEL_ENVIRONMENT=development

# Continuous Profiling (Grafana Pyroscope) - Backend y Batch
PYROSCOPE_ENABLED=true
PYROSCOPE_SERVER_ADDRESS=
# fallback global
PYROSCOPE_APPLICATION_NAME=
PYROSCOPE_AUTH_TOKEN=
PYROSCOPE_TENANT_ID=
PYROSCOPE_BASIC_AUTH_USER=
PYROSCOPE_BASIC_AUTH_PASSWORD=
PYROSCOPE_FLUSH_INTERVAL_MS=10000
# etiquetas adicionales: key=value,key2=value2
PYROSCOPE_TAGS=
PYROSCOPE_ENV=development

# Overrides pedidos por servicio
PYROSCOPE_APPLICATION_NAME_BACKEND=rent-backend
PYROSCOPE_APPLICATION_NAME_BATCH=rent-batch
# JAEGER_ENDPOINT=http://localhost:14268/api/traces
